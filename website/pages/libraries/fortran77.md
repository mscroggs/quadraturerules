# FORTRAN 77 library

The source code of the quadraturerules FORTRAN 77 library can be downloaded from the
[latest release on GitHub](https://github.com/quadraturerules/quadraturerules/releases/latest/).

The library's tests can be built by running:

```bash
gfortran test.f -o -std=legacy test
./test
```

## Usage

The library's function `siquad` can be used to write the points and weights
of quadrature rules for a single integral into an array. For example, the following snippet
will create an order 3 Xiao--Gimbutas rule on a triangle:

```fortran77
c Example to create order 3 Xiao-Gimbutas rule
      INCLUDE "quadraturerules.f"
      PROGRAM EXAMPLE
      REAL P,W
      DIMENSION P(0:2, 0:6)
      DIMENSION W(0:6)
      CALL SIQUAD(2, 4, 3, P, W, 6, 2)
      END
```

Note that the points returned by the library are represented using
[barycentric coordinates](/barycentric.md).

## Generating the library
The FORTRAN 77 quadraturerules library can be generated from the templates in the online encyclopedia
of quadrature rules GitHub repo. First clone the repo and move into the library directory:

```bash
git clone https://github.com/quadraturerules/quadraturerules.git
cd quadraturerules/library
```

The FORTRAN 77 library can then be generated by running:

```bash
python build.py fortran77
```

This will create a directory called fortran77.build containing the FORTRAN 77 source code.
This code can be converted to pictures of punchcards using the library
[fortran77punchcards](https://pypi.org/project/fortran77punchcards/).
